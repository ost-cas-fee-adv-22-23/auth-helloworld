"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/auth/[...nextauth]";
exports.ids = ["pages/api/auth/[...nextauth]"];
exports.modules = {

/***/ "next-auth":
/*!****************************!*\
  !*** external "next-auth" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("next-auth");

/***/ }),

/***/ "(api)/./src/pages/api/auth/[...nextauth].ts":
/*!*********************************************!*\
  !*** ./src/pages/api/auth/[...nextauth].ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth */ \"next-auth\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_0__);\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (next_auth__WEBPACK_IMPORTED_MODULE_0___default()({\n    providers: [\n        {\n            id: \"zitadel\",\n            name: \"zitadel\",\n            type: \"oauth\",\n            version: \"2\",\n            wellKnown: process.env.ZITADEL_ISSUER,\n            authorization: {\n                params: {\n                    scope: \"openid email profile\"\n                }\n            },\n            idToken: true,\n            checks: [\n                \"pkce\",\n                \"state\"\n            ],\n            client: {\n                token_endpoint_auth_method: \"none\"\n            },\n            async profile (_, { access_token }) {\n                const { userinfo_endpoint } = await (await fetch(`${process.env.ZITADEL_ISSUER}/.well-known/openid-configuration`)).json();\n                const profile = await (await fetch(userinfo_endpoint, {\n                    headers: {\n                        Authorization: `Bearer ${access_token}`\n                    }\n                })).json();\n                return {\n                    id: profile.sub,\n                    firstname: profile.given_name,\n                    lastname: profile.family_name,\n                    username: profile.preferred_username,\n                    avatarUrl: profile.picture || undefined\n                };\n            },\n            clientId: process.env.ZITADEL_CLIENT_ID\n        }\n    ],\n    session: {\n        maxAge: 12 * 60 * 60\n    },\n    pages: {\n        signIn: \"/login\"\n    },\n    callbacks: {\n        async jwt ({ token, user, account }) {\n            if (account) {\n                token.accessToken = account.access_token;\n                token.expiresAt = account.expires_at * 1000;\n            }\n            if (user) {\n                token.user = user;\n            }\n            if (Date.now() > token.expiresAt) {\n                delete token.accessToken;\n            }\n            return token;\n        },\n        async session ({ session, token }) {\n            session.user = token.user;\n            session.accessToken = token.accessToken;\n            return session;\n        }\n    }\n}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvcGFnZXMvYXBpL2F1dGgvWy4uLm5leHRhdXRoXS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBaUM7QUFFakMsaUVBQWVBLGdEQUFRQSxDQUFDO0lBQ3RCQyxXQUFXO1FBQ1Q7WUFDRUMsSUFBSTtZQUNKQyxNQUFNO1lBQ05DLE1BQU07WUFDTkMsU0FBUztZQUNUQyxXQUFXQyxRQUFRQyxJQUFJQztZQUN2QkMsZUFBZTtnQkFDYkMsUUFBUTtvQkFDTkMsT0FBTztnQkFDVDtZQUNGO1lBQ0FDLFNBQVM7WUFDVEMsUUFBUTtnQkFBQztnQkFBUTthQUFRO1lBQ3pCQyxRQUFRO2dCQUNOQyw0QkFBNEI7WUFDOUI7WUFDQSxNQUFNQyxTQUFRQyxDQUFDLEVBQUUsRUFBRUMsWUFBWSxFQUFFO2dCQUMvQixNQUFNLEVBQUVDLGlCQUFpQixFQUFFLEdBQUcsTUFBTSxDQUNsQyxNQUFNQyxNQUFNLENBQUMsRUFBRWQsUUFBUUMsSUFBSUMsZUFBZSxpQ0FBaUMsQ0FBQyxHQUM1RWE7Z0JBQ0YsTUFBTUwsVUFBVSxNQUFNLENBQ3BCLE1BQU1JLE1BQU1ELG1CQUFtQjtvQkFDN0JHLFNBQVM7d0JBQ1BDLGVBQWUsQ0FBQyxPQUFPLEVBQUVMLGFBQWEsQ0FBQztvQkFDekM7Z0JBQ0YsRUFBQyxFQUNERztnQkFFRixPQUFPO29CQUNMcEIsSUFBSWUsUUFBUVE7b0JBQ1pDLFdBQVdULFFBQVFVO29CQUNuQkMsVUFBVVgsUUFBUVk7b0JBQ2xCQyxVQUFVYixRQUFRYztvQkFDbEJDLFdBQVdmLFFBQVFnQixXQUFXQztnQkFDaEM7WUFDRjtZQUNBQyxVQUFVNUIsUUFBUUMsSUFBSTRCO1FBQ3hCO0tBQ0Q7SUFDREMsU0FBUztRQUNQQyxRQUFRLEtBQUssS0FBSztJQUNwQjtJQUNBQyxPQUFPO1FBQ0xDLFFBQVE7SUFDVjtJQUNBQyxXQUFXO1FBQ1QsTUFBTUMsS0FBSSxFQUFFQyxLQUFLLEVBQUVDLElBQUksRUFBRUMsT0FBTyxFQUFFO1lBQ2hDLElBQUlBLFNBQVM7Z0JBQ1hGLE1BQU1HLGNBQWNELFFBQVExQjtnQkFDNUJ3QixNQUFNSSxZQUFZLFFBQVNDLGFBQXdCO1lBQ3JEO1lBQ0EsSUFBSUosTUFBTTtnQkFDUkQsTUFBTUMsT0FBT0E7WUFDZjtZQUVBLElBQUlLLEtBQUtDLFFBQVNQLE1BQU1JLFdBQXNCO2dCQUM1QyxPQUFPSixNQUFNRztZQUNmO1lBRUEsT0FBT0g7UUFDVDtRQUNBLE1BQU1OLFNBQVEsRUFBRUEsT0FBTyxFQUFFTSxLQUFLLEVBQUU7WUFDOUJOLFFBQVFPLE9BQU9ELE1BQU1DO1lBQ3JCUCxRQUFRUyxjQUFjSCxNQUFNRztZQUM1QixPQUFPVDtRQUNUO0lBQ0Y7QUFDRixFQUFFLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oZWxsby13b3JsZC8uL3NyYy9wYWdlcy9hcGkvYXV0aC9bLi4ubmV4dGF1dGhdLnRzPzUwYTEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IE5leHRBdXRoIGZyb20gJ25leHQtYXV0aCc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBOZXh0QXV0aCh7XHJcbiAgcHJvdmlkZXJzOiBbXHJcbiAgICB7XHJcbiAgICAgIGlkOiAneml0YWRlbCcsXHJcbiAgICAgIG5hbWU6ICd6aXRhZGVsJyxcclxuICAgICAgdHlwZTogJ29hdXRoJyxcclxuICAgICAgdmVyc2lvbjogJzInLFxyXG4gICAgICB3ZWxsS25vd246IHByb2Nlc3MuZW52LlpJVEFERUxfSVNTVUVSLFxyXG4gICAgICBhdXRob3JpemF0aW9uOiB7XHJcbiAgICAgICAgcGFyYW1zOiB7XHJcbiAgICAgICAgICBzY29wZTogJ29wZW5pZCBlbWFpbCBwcm9maWxlJyxcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgICBpZFRva2VuOiB0cnVlLFxyXG4gICAgICBjaGVja3M6IFsncGtjZScsICdzdGF0ZSddLFxyXG4gICAgICBjbGllbnQ6IHtcclxuICAgICAgICB0b2tlbl9lbmRwb2ludF9hdXRoX21ldGhvZDogJ25vbmUnLFxyXG4gICAgICB9LFxyXG4gICAgICBhc3luYyBwcm9maWxlKF8sIHsgYWNjZXNzX3Rva2VuIH0pIHtcclxuICAgICAgICBjb25zdCB7IHVzZXJpbmZvX2VuZHBvaW50IH0gPSBhd2FpdCAoXHJcbiAgICAgICAgICBhd2FpdCBmZXRjaChgJHtwcm9jZXNzLmVudi5aSVRBREVMX0lTU1VFUn0vLndlbGwta25vd24vb3BlbmlkLWNvbmZpZ3VyYXRpb25gKVxyXG4gICAgICAgICkuanNvbigpO1xyXG4gICAgICAgIGNvbnN0IHByb2ZpbGUgPSBhd2FpdCAoXHJcbiAgICAgICAgICBhd2FpdCBmZXRjaCh1c2VyaW5mb19lbmRwb2ludCwge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2FjY2Vzc190b2tlbn1gLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApLmpzb24oKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIGlkOiBwcm9maWxlLnN1YixcclxuICAgICAgICAgIGZpcnN0bmFtZTogcHJvZmlsZS5naXZlbl9uYW1lLFxyXG4gICAgICAgICAgbGFzdG5hbWU6IHByb2ZpbGUuZmFtaWx5X25hbWUsXHJcbiAgICAgICAgICB1c2VybmFtZTogcHJvZmlsZS5wcmVmZXJyZWRfdXNlcm5hbWUsXHJcbiAgICAgICAgICBhdmF0YXJVcmw6IHByb2ZpbGUucGljdHVyZSB8fCB1bmRlZmluZWQsXHJcbiAgICAgICAgfTtcclxuICAgICAgfSxcclxuICAgICAgY2xpZW50SWQ6IHByb2Nlc3MuZW52LlpJVEFERUxfQ0xJRU5UX0lELFxyXG4gICAgfSxcclxuICBdLFxyXG4gIHNlc3Npb246IHtcclxuICAgIG1heEFnZTogMTIgKiA2MCAqIDYwLCAvLyAxMiBob3Vyc1xyXG4gIH0sXHJcbiAgcGFnZXM6IHtcclxuICAgIHNpZ25JbjogJy9sb2dpbicsXHJcbiAgfSxcclxuICBjYWxsYmFja3M6IHtcclxuICAgIGFzeW5jIGp3dCh7IHRva2VuLCB1c2VyLCBhY2NvdW50IH0pIHtcclxuICAgICAgaWYgKGFjY291bnQpIHtcclxuICAgICAgICB0b2tlbi5hY2Nlc3NUb2tlbiA9IGFjY291bnQuYWNjZXNzX3Rva2VuO1xyXG4gICAgICAgIHRva2VuLmV4cGlyZXNBdCA9IChhY2NvdW50LmV4cGlyZXNfYXQgYXMgbnVtYmVyKSAqIDEwMDA7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHVzZXIpIHtcclxuICAgICAgICB0b2tlbi51c2VyID0gdXNlcjtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKERhdGUubm93KCkgPiAodG9rZW4uZXhwaXJlc0F0IGFzIG51bWJlcikpIHtcclxuICAgICAgICBkZWxldGUgdG9rZW4uYWNjZXNzVG9rZW47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB0b2tlbjtcclxuICAgIH0sXHJcbiAgICBhc3luYyBzZXNzaW9uKHsgc2Vzc2lvbiwgdG9rZW4gfSkge1xyXG4gICAgICBzZXNzaW9uLnVzZXIgPSB0b2tlbi51c2VyO1xyXG4gICAgICBzZXNzaW9uLmFjY2Vzc1Rva2VuID0gdG9rZW4uYWNjZXNzVG9rZW47XHJcbiAgICAgIHJldHVybiBzZXNzaW9uO1xyXG4gICAgfSxcclxuICB9LFxyXG59KTtcclxuIl0sIm5hbWVzIjpbIk5leHRBdXRoIiwicHJvdmlkZXJzIiwiaWQiLCJuYW1lIiwidHlwZSIsInZlcnNpb24iLCJ3ZWxsS25vd24iLCJwcm9jZXNzIiwiZW52IiwiWklUQURFTF9JU1NVRVIiLCJhdXRob3JpemF0aW9uIiwicGFyYW1zIiwic2NvcGUiLCJpZFRva2VuIiwiY2hlY2tzIiwiY2xpZW50IiwidG9rZW5fZW5kcG9pbnRfYXV0aF9tZXRob2QiLCJwcm9maWxlIiwiXyIsImFjY2Vzc190b2tlbiIsInVzZXJpbmZvX2VuZHBvaW50IiwiZmV0Y2giLCJqc29uIiwiaGVhZGVycyIsIkF1dGhvcml6YXRpb24iLCJzdWIiLCJmaXJzdG5hbWUiLCJnaXZlbl9uYW1lIiwibGFzdG5hbWUiLCJmYW1pbHlfbmFtZSIsInVzZXJuYW1lIiwicHJlZmVycmVkX3VzZXJuYW1lIiwiYXZhdGFyVXJsIiwicGljdHVyZSIsInVuZGVmaW5lZCIsImNsaWVudElkIiwiWklUQURFTF9DTElFTlRfSUQiLCJzZXNzaW9uIiwibWF4QWdlIiwicGFnZXMiLCJzaWduSW4iLCJjYWxsYmFja3MiLCJqd3QiLCJ0b2tlbiIsInVzZXIiLCJhY2NvdW50IiwiYWNjZXNzVG9rZW4iLCJleHBpcmVzQXQiLCJleHBpcmVzX2F0IiwiRGF0ZSIsIm5vdyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/auth/[...nextauth].ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./src/pages/api/auth/[...nextauth].ts"));
module.exports = __webpack_exports__;

})();